import"copy-anything";const e={ALWAYS:0,PARENS_DIVISION:1,PARENS:2};function t(e){let t;const n=e.length,i=new Array(n);for(t=0;t<n;t++)i[t]=e[t];return i}class n{constructor(){this.parent=null,this.visibilityBlocks=void 0,this.nodeVisible=void 0,this.rootNode=null,this.parsed=null}get currentFileInfo(){return this.fileInfo()}get index(){return this.getIndex()}setParent(e,t){function i(e){e&&e instanceof n&&(e.parent=t)}Array.isArray(e)?e.forEach(i):i(e)}getIndex(){return this._index||this.parent&&this.parent.getIndex()||0}fileInfo(){return this._fileInfo||this.parent&&this.parent.fileInfo()||{}}isRulesetLike(){return!1}toCSS(e){const t=[];return this.genCSS(e,{add:function(e,n,i){t.push(e)},isEmpty:function(){return 0===t.length}}),t.join("")}genCSS(e,t){t.add(this.value)}accept(e){this.value=e.visit(this.value)}eval(){return this}_operate(e,t,n,i){switch(t){case"+":return n+i;case"-":return n-i;case"*":return n*i;case"/":return n/i}}fround(e,t){const n=e&&e.numPrecision;return n?Number((t+2e-16).toFixed(n)):t}static compare(e,t){if(e.compare&&"Quoted"!==t.type&&"Anonymous"!==t.type)return e.compare(t);if(t.compare)return-t.compare(e);if(e.type===t.type){if(e=e.value,t=t.value,!Array.isArray(e))return e===t?0:void 0;if(e.length===t.length){for(let i=0;i<e.length;i++)if(0!==n.compare(e[i],t[i]))return;return 0}}}static numericCompare(e,t){return e<t?-1:e===t?0:e>t?1:void 0}blocksVisibility(){return void 0===this.visibilityBlocks&&(this.visibilityBlocks=0),0!==this.visibilityBlocks}addVisibilityBlock(){void 0===this.visibilityBlocks&&(this.visibilityBlocks=0),this.visibilityBlocks=this.visibilityBlocks+1}removeVisibilityBlock(){void 0===this.visibilityBlocks&&(this.visibilityBlocks=0),this.visibilityBlocks=this.visibilityBlocks-1}ensureVisibility(){this.nodeVisible=!0}ensureInvisibility(){this.nodeVisible=!1}isVisible(){return this.nodeVisible}visibilityInfo(){return{visibilityBlocks:this.visibilityBlocks,nodeVisible:this.nodeVisible}}copyVisibilityInfo(e){e&&(this.visibilityBlocks=e.visibilityBlocks,this.nodeVisible=e.nodeVisible)}}var i={length:{m:1,cm:.01,mm:.001,in:.0254,px:.0254/96,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:1/400,turn:1}};const a=function(e,n,i){this.numerator=e?t(e).sort():[],this.denominator=n?t(n).sort():[],i?this.backupUnit=i:e&&e.length&&(this.backupUnit=e[0])};a.prototype=Object.assign(new n,{type:"Unit",clone(){return new a(t(this.numerator),t(this.denominator),this.backupUnit)},genCSS(e,t){const n=e&&e.strictUnits;1===this.numerator.length?t.add(this.numerator[0]):!n&&this.backupUnit?t.add(this.backupUnit):!n&&this.denominator.length&&t.add(this.denominator[0])},toString(){let e,t=this.numerator.join("*");for(e=0;e<this.denominator.length;e++)t+=`/${this.denominator[e]}`;return t},compare(e){return this.is(e.toString())?0:void 0},is(e){return this.toString().toUpperCase()===e.toUpperCase()},isLength(){return RegExp("^(px|em|ex|ch|rem|in|cm|mm|pc|pt|ex|vw|vh|vmin|vmax)$","gi").test(this.toCSS())},isEmpty(){return 0===this.numerator.length&&0===this.denominator.length},isSingular(){return this.numerator.length<=1&&0===this.denominator.length},map(e){let t;for(t=0;t<this.numerator.length;t++)this.numerator[t]=e(this.numerator[t],!1);for(t=0;t<this.denominator.length;t++)this.denominator[t]=e(this.denominator[t],!0)},usedUnits(){let e;const t={};let n,a;for(a in n=function(n){return e.hasOwnProperty(n)&&!t[a]&&(t[a]=n),n},i)i.hasOwnProperty(a)&&(e=i[a],this.map(n));return t},cancel(){const e={};let t,n;for(n=0;n<this.numerator.length;n++)t=this.numerator[n],e[t]=(e[t]||0)+1;for(n=0;n<this.denominator.length;n++)t=this.denominator[n],e[t]=(e[t]||0)-1;for(t in this.numerator=[],this.denominator=[],e)if(e.hasOwnProperty(t)){const i=e[t];if(i>0)for(n=0;n<i;n++)this.numerator.push(t);else if(i<0)for(n=0;n<-i;n++)this.denominator.push(t)}this.numerator.sort(),this.denominator.sort()}});var r={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};const s=function(e,t,n){const i=this;Array.isArray(e)?this.rgb=e:e.length>=6?(this.rgb=[],e.match(/.{2}/g).map((function(e,t){t<3?i.rgb.push(parseInt(e,16)):i.alpha=parseInt(e,16)/255}))):(this.rgb=[],e.split("").map((function(e,t){t<3?i.rgb.push(parseInt(e+e,16)):i.alpha=parseInt(e+e,16)/255}))),this.alpha=this.alpha||("number"==typeof t?t:1),void 0!==n&&(this.value=n)};function o(e,t){return Math.min(Math.max(e,0),t)}function l(e){return`#${e.map((function(e){return((e=o(Math.round(e),255))<16?"0":"")+e.toString(16)})).join("")}`}s.prototype=Object.assign(new n,{type:"Color",luma(){let e=this.rgb[0]/255,t=this.rgb[1]/255,n=this.rgb[2]/255;return e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),n=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*e+.7152*t+.0722*n},genCSS(e,t){t.add(this.toCSS(e))},toCSS(e,t){const n=e&&e.compress&&!t;let i,a,r,s=[];if(a=this.fround(e,this.alpha),this.value)if(0===this.value.indexOf("rgb"))a<1&&(r="rgba");else{if(0!==this.value.indexOf("hsl"))return this.value;r=a<1?"hsla":"hsl"}else a<1&&(r="rgba");switch(r){case"rgba":s=this.rgb.map((function(e){return o(Math.round(e),255)})).concat(o(a,1));break;case"hsla":s.push(o(a,1));case"hsl":i=this.toHSL(),s=[this.fround(e,i.h),`${this.fround(e,100*i.s)}%`,`${this.fround(e,100*i.l)}%`].concat(s)}if(r)return`${r}(${s.join(","+(n?"":" "))})`;if(i=this.toRGB(),n){const e=i.split("");e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]&&(i=`#${e[1]}${e[3]}${e[5]}`)}return i},operate(e,t,n){const i=new Array(3),a=this.alpha*(1-n.alpha)+n.alpha;for(let a=0;a<3;a++)i[a]=this._operate(e,t,this.rgb[a],n.rgb[a]);return new s(i,a)},toRGB(){return l(this.rgb)},toHSL(){const e=this.rgb[0]/255,t=this.rgb[1]/255,n=this.rgb[2]/255,i=this.alpha,a=Math.max(e,t,n),r=Math.min(e,t,n);let s,o;const l=(a+r)/2,u=a-r;if(a===r)s=o=0;else{switch(o=l>.5?u/(2-a-r):u/(a+r),a){case e:s=(t-n)/u+(t<n?6:0);break;case t:s=(n-e)/u+2;break;case n:s=(e-t)/u+4}s/=6}return{h:360*s,s:o,l:l,a:i}},toHSV(){const e=this.rgb[0]/255,t=this.rgb[1]/255,n=this.rgb[2]/255,i=this.alpha,a=Math.max(e,t,n),r=Math.min(e,t,n);let s,o;const l=a,u=a-r;if(o=0===a?0:u/a,a===r)s=0;else{switch(a){case e:s=(t-n)/u+(t<n?6:0);break;case t:s=(n-e)/u+2;break;case n:s=(e-t)/u+4}s/=6}return{h:360*s,s:o,v:l,a:i}},toARGB(){return l([255*this.alpha].concat(this.rgb))},compare(e){return e.rgb&&e.rgb[0]===this.rgb[0]&&e.rgb[1]===this.rgb[1]&&e.rgb[2]===this.rgb[2]&&e.alpha===this.alpha?0:void 0}}),s.fromKeyword=function(e){let t;const n=e.toLowerCase();if(r.hasOwnProperty(n)?t=new s(r[n].slice(1)):"transparent"===n&&(t=new s([0,0,0],0)),t)return t.value=e,t};const u=function(e,t){if(this.value=parseFloat(e),isNaN(this.value))throw new Error("Dimension is not a number.");this.unit=t&&t instanceof a?t:new a(t?[t]:void 0),this.setParent(this.unit,this)};u.prototype=Object.assign(new n,{type:"Dimension",accept(e){this.unit=e.visit(this.unit)},eval(e){return this},toColor(){return new s([this.value,this.value,this.value])},genCSS(e,t){if(e&&e.strictUnits&&!this.unit.isSingular())throw new Error(`Multiple units in dimension. Correct the units or use the unit function. Bad unit: ${this.unit.toString()}`);const n=this.fround(e,this.value);let i=String(n);if(0!==n&&n<1e-6&&n>-1e-6&&(i=n.toFixed(20).replace(/0+$/,"")),e&&e.compress){if(0===n&&this.unit.isLength())return void t.add(i);n>0&&n<1&&(i=i.substr(1))}t.add(i),this.unit.genCSS(e,t)},operate(e,t,n){let i=this._operate(e,t,this.value,n.value),a=this.unit.clone();if("+"===t||"-"===t)if(0===a.numerator.length&&0===a.denominator.length)a=n.unit.clone(),this.unit.backupUnit&&(a.backupUnit=this.unit.backupUnit);else if(0===n.unit.numerator.length&&0===a.denominator.length);else{if(n=n.convertTo(this.unit.usedUnits()),e.strictUnits&&n.unit.toString()!==a.toString())throw new Error(`Incompatible units. Change the units or use the unit function. Bad units: '${a.toString()}' and '${n.unit.toString()}'.`);i=this._operate(e,t,this.value,n.value)}else"*"===t?(a.numerator=a.numerator.concat(n.unit.numerator).sort(),a.denominator=a.denominator.concat(n.unit.denominator).sort(),a.cancel()):"/"===t&&(a.numerator=a.numerator.concat(n.unit.denominator).sort(),a.denominator=a.denominator.concat(n.unit.numerator).sort(),a.cancel());return new u(i,a)},compare(e){let t,i;if(e instanceof u){if(this.unit.isEmpty()||e.unit.isEmpty())t=this,i=e;else if(t=this.unify(),i=e.unify(),0!==t.unit.compare(i.unit))return;return n.numericCompare(t.value,i.value)}},unify(){return this.convertTo({length:"px",duration:"s",angle:"rad"})},convertTo(e){let t=this.value;const n=this.unit.clone();let a,r,s,o,l,h={};if("string"==typeof e){for(a in i)i[a].hasOwnProperty(e)&&(h={},h[a]=e);e=h}for(r in l=function(e,n){return s.hasOwnProperty(e)?(n?t/=s[e]/s[o]:t*=s[e]/s[o],o):e},e)e.hasOwnProperty(r)&&(o=e[r],s=i[r],n.map(l));return n.cancel(),new u(t,n)}});const h=function(e,t,n,i,a,r){this.value=e,this._index=t,this._fileInfo=n,this.mapLines=i,this.rulesetLike=void 0!==a&&a,this.allowRoot=!0,this.copyVisibilityInfo(r)};h.prototype=Object.assign(new n,{type:"Anonymous",eval(){return new h(this.value,this._index,this._fileInfo,this.mapLines,this.rulesetLike,this.visibilityInfo())},compare(e){return e.toCSS&&this.toCSS()===e.toCSS()?0:void 0},isRulesetLike(){return this.rulesetLike},genCSS(e,t){this.nodeVisible=Boolean(this.value),this.nodeVisible&&t.add(this.value,this._fileInfo,this._index,this.mapLines)}});const f=function(e){this.value=e};function c(e){return`/* line ${e.debugInfo.lineNumber}, ${e.debugInfo.fileName} */\n`}function d(e){let t=e.debugInfo.fileName;return/^[a-z]+:\/\//i.test(t)||(t=`file://${t}`),`@media -sass-debug-info{filename{font-family:${t.replace(/([.:\/\\])/g,(function(e){return"\\"==e&&(e="/"),`\\${e}`}))}}line{font-family:\\00003${e.debugInfo.lineNumber}}}\n`}f.prototype=Object.assign(new n,{type:"Paren",genCSS(e,t){t.add("("),this.value.genCSS(e,t),t.add(")")},eval(e){return new f(this.value.eval(e))}});const p=function(e,t,n,i){this.value=e,this.isLineComment=t,this._index=n,this._fileInfo=i,this.allowRoot=!0};p.prototype=Object.assign(new n,{type:"Comment",genCSS(e,t){this.debugInfo&&t.add(function(e,t,n){let i="";if(e.dumpLineNumbers&&!e.compress)switch(e.dumpLineNumbers){case"comments":i=c(t);break;case"mediaquery":i=d(t);break;case"all":i=c(t)+(n||"")+d(t)}return i}(e,this),this.fileInfo(),this.getIndex()),t.add(this.value)},isSilent(e){const t=e.compress&&"!"!==this.value[2];return this.isLineComment||t}});const g=function(e,t){if(this.value=e,this.noSpacing=t,!e)throw new Error("Expression requires an array parameter")};g.prototype=Object.assign(new n,{type:"Expression",accept(e){this.value=e.visitArray(this.value)},eval(e){let t;const n=e.isMathOn(),i=this.parens;let a=!1;return i&&e.inParenthesis(),this.value.length>1?t=new g(this.value.map((function(t){return t.eval?t.eval(e):t})),this.noSpacing):1===this.value.length?(!this.value[0].parens||this.value[0].parensInOp||e.inCalc||(a=!0),t=this.value[0].eval(e)):t=this,i&&e.outOfParenthesis(),!this.parens||!this.parensInOp||n||a||t instanceof u||(t=new f(t)),t},genCSS(e,t){for(let n=0;n<this.value.length;n++)this.value[n].genCSS(e,t),!this.noSpacing&&n+1<this.value.length&&t.add(" ")},throwAwayComments(){this.value=this.value.filter((function(e){return!(e instanceof p)}))}});class m{constructor(e,t,n,i){this.name=e.toLowerCase(),this.index=n,this.context=t,this.currentFileInfo=i,this.func=t.frames[0].functionRegistry.get(this.name)}isValid(){return Boolean(this.func)}call(e){Array.isArray(e)||(e=[e]);const t=this.func.evalArgs;!1!==t&&(e=e.map((e=>e.eval(this.context))));const n=e=>!("Comment"===e.type);return e=e.filter(n).map((e=>{if("Expression"===e.type){const t=e.value.filter(n);return 1===t.length?e.parens&&"/"===t[0].op?e:t[0]:new g(t)}return e})),!1===t?this.func(this.context,...e):this.func(...e)}}const v=function(e,t,n,i){this.name=e,this.args=t,this.calc="calc"===e,this._index=n,this._fileInfo=i};v.prototype=Object.assign(new n,{type:"Call",accept(e){this.args&&(this.args=e.visitArray(this.args))},eval(e){const t=e.mathOn;e.mathOn=!this.calc,(this.calc||e.inCalc)&&e.enterCalc();const i=()=>{(this.calc||e.inCalc)&&e.exitCalc(),e.mathOn=t};let a;const r=new m(this.name,e,this.getIndex(),this.fileInfo());if(r.isValid())try{a=r.call(this.args),i()}catch(e){if(e.hasOwnProperty("line")&&e.hasOwnProperty("column"))throw e;throw{type:e.type||"Runtime",message:`Error evaluating function \`${this.name}\`${e.message?`: ${e.message}`:""}`,index:this.getIndex(),filename:this.fileInfo().filename,line:e.lineNumber,column:e.columnNumber}}if(null!=a)return a instanceof n||(a=new h(a&&!0!==a?a.toString():null)),a._index=this._index,a._fileInfo=this._fileInfo,a;const s=this.args.map((t=>t.eval(e)));return i(),new v(this.name,s,this.getIndex(),this.fileInfo())},genCSS(e,t){t.add(`${this.name}(`,this.fileInfo(),this.getIndex());for(let n=0;n<this.args.length;n++)this.args[n].genCSS(e,t),n+1<this.args.length&&t.add(", ");t.add(")")}});const b=function(e,t,n){this.name=e,this._index=t,this._fileInfo=n};b.prototype=Object.assign(new n,{type:"Variable",eval(e){let t,n=this.name;if(0===n.indexOf("@@")&&(n=`@${new b(n.slice(1),this.getIndex(),this.fileInfo()).eval(e).value}`),this.evaluating)throw{type:"Name",message:`Recursive variable definition for ${n}`,filename:this.fileInfo().filename,index:this.getIndex()};if(this.evaluating=!0,t=this.find(e.frames,(function(t){const i=t.variable(n);if(i){if(i.important){e.importantScope[e.importantScope.length-1].important=i.important}return e.inCalc?new v("_SELF",[i.value]).eval(e):i.value.eval(e)}})),t)return this.evaluating=!1,t;throw{type:"Name",message:`variable ${n} is undefined`,filename:this.fileInfo().filename,index:this.getIndex()}},find(e,t){for(let n,i=0;i<e.length;i++)if(n=t.call(e,e[i]),n)return n;return null}});const y=function(e){if(!e)throw new Error("Value requires an array argument");Array.isArray(e)?this.value=e:this.value=[e]};y.prototype=Object.assign(new n,{type:"Value",accept(e){this.value&&(this.value=e.visitArray(this.value))},eval(e){return 1===this.value.length?this.value[0].eval(e):new y(this.value.map((function(t){return t.eval(e)})))},genCSS(e,t){let n;for(n=0;n<this.value.length;n++)this.value[n].genCSS(e,t),n+1<this.value.length&&t.add(e&&e.compress?",":", ")}});const w=function(e){this.value=e};w.prototype=Object.assign(new n,{type:"Keyword",genCSS(e,t){if("%"===this.value)throw{type:"Syntax",message:"Invalid % without number"};t.add(this.value)}}),w.True=new w("true"),w.False=new w("false");const S=e;const I=function(e,t,i,a,r,s,o,l){this.name=e,this.value=t instanceof n?t:new y([t?new h(t):null]),this.important=i?` ${i.trim()}`:"",this.merge=a,this._index=r,this._fileInfo=s,this.inline=o||!1,this.variable=void 0!==l?l:e.charAt&&"@"===e.charAt(0),this.allowRoot=!0,this.setParent(this.value,this)};I.prototype=Object.assign(new n,{type:"Declaration",genCSS(e,t){t.add(this.name+(e.compress?":":": "),this.fileInfo(),this.getIndex());try{this.value.genCSS(e,t)}catch(e){throw e.index=this._index,e.filename=this._fileInfo.filename,e}t.add(this.important+(this.inline||e.lastRule&&e.compress?"":";"),this._fileInfo,this._index)},eval(e){let t,n,i=!1,a=this.name,r=this.variable;"string"!=typeof a&&(a=1===a.length&&a[0]instanceof w?a[0].value:function(e,t){let n,i="";const a=t.length,r={add:function(e){i+=e}};for(n=0;n<a;n++)t[n].eval(e).genCSS(e,r);return i}(e,a),r=!1),"font"===a&&e.math===S.ALWAYS&&(i=!0,t=e.math,e.math=S.PARENS_DIVISION);try{if(e.importantScope.push({}),n=this.value.eval(e),!this.variable&&"DetachedRuleset"===n.type)throw{message:"Rulesets cannot be evaluated on a property.",index:this.getIndex(),filename:this.fileInfo().filename};let t=this.important;const i=e.importantScope.pop();return!t&&i.important&&(t=i.important),new I(a,n,t,this.merge,this.getIndex(),this.fileInfo(),this.inline,r)}catch(e){throw"number"!=typeof e.index&&(e.index=this.getIndex(),e.filename=this.fileInfo().filename),e}finally{i&&(e.math=t)}},makeImportant(){return new I(this.name,this.value,"!important",this.merge,this.getIndex(),this.fileInfo(),this.inline)}});const x=function(e,t,n){this.name=e,this._index=t,this._fileInfo=n};x.prototype=Object.assign(new n,{type:"Property",eval(e){let t;const n=this.name,i=e.pluginManager.less.visitors.ToCSSVisitor.prototype._mergeRules;if(this.evaluating)throw{type:"Name",message:`Recursive property reference for ${n}`,filename:this.fileInfo().filename,index:this.getIndex()};if(this.evaluating=!0,t=this.find(e.frames,(function(t){let a;const r=t.property(n);if(r){for(let e=0;e<r.length;e++)a=r[e],r[e]=new I(a.name,a.value,a.important,a.merge,a.index,a.currentFileInfo,a.inline,a.variable);if(i(r),a=r[r.length-1],a.important){e.importantScope[e.importantScope.length-1].important=a.important}return a=a.value.eval(e),a}})),t)return this.evaluating=!1,t;throw{type:"Name",message:`Property '${n}' is undefined`,filename:this.currentFileInfo.filename,index:this.index}},find(e,t){for(let n,i=0;i<e.length;i++)if(n=t.call(e,e[i]),n)return n;return null}});const k=function(e,t,n,i,a){this.escaped=void 0===n||n,this.value=t||"",this.quote=e.charAt(0),this._index=i,this._fileInfo=a,this.variableRegex=/@\{([\w-]+)\}/g,this.propRegex=/\$\{([\w-]+)\}/g,this.allowRoot=n};k.prototype=Object.assign(new n,{type:"Quoted",genCSS(e,t){this.escaped||t.add(this.quote,this.fileInfo(),this.getIndex()),t.add(this.value),this.escaped||t.add(this.quote)},containsVariables(){return this.value.match(this.variableRegex)},eval(e){const t=this;let n=this.value;function i(e,t,n){let i=e;do{e=i.toString(),i=e.replace(t,n)}while(e!==i);return i}return n=i(n,this.variableRegex,(function(n,i){const a=new b(`@${i}`,t.getIndex(),t.fileInfo()).eval(e,!0);return a instanceof k?a.value:a.toCSS()})),n=i(n,this.propRegex,(function(n,i){const a=new x(`$${i}`,t.getIndex(),t.fileInfo()).eval(e,!0);return a instanceof k?a.value:a.toCSS()})),new k(this.quote+n+this.quote,n,this.escaped,this.getIndex(),this.fileInfo())},compare(e){return"Quoted"!==e.type||this.escaped||e.escaped?e.toCSS&&this.toCSS()===e.toCSS()?0:void 0:n.numericCompare(this.value,e.value)}});const C=e,O=function(e,t,n){this.op=e.trim(),this.operands=t,this.isSpaced=n};let A;function _(e){return Math.min(1,Math.max(0,e))}function $(e,t){const n=A.hsla(t.h,t.s,t.l,t.a);if(n)return e.value&&/^(rgb|hsl)/.test(e.value)?n.value=e.value:n.value="rgb",n}function V(e){if(e.toHSL)return e.toHSL();throw new Error("Argument cannot be evaluated to a color")}function R(e){if(e.toHSV)return e.toHSV();throw new Error("Argument cannot be evaluated to a color")}function B(e){if(e instanceof u)return parseFloat(e.unit.is("%")?e.value/100:e.value);if("number"==typeof e)return e;throw{type:"Argument",message:"color functions take numbers as parameters"}}O.prototype=Object.assign(new n,{type:"Operation",accept(e){this.operands=e.visitArray(this.operands)},eval(e){let t,n=this.operands[0].eval(e),i=this.operands[1].eval(e);if(e.isMathOn(this.op)){if(t="./"===this.op?"/":this.op,n instanceof u&&i instanceof s&&(n=n.toColor()),i instanceof u&&n instanceof s&&(i=i.toColor()),!n.operate||!i.operate){if((n instanceof O||i instanceof O)&&"/"===n.op&&e.math===C.PARENS_DIVISION)return new O(this.op,[n,i],this.isSpaced);throw{type:"Operation",message:"Operation on an invalid type"}}return n.operate(e,t,i)}return new O(this.op,[n,i],this.isSpaced)},genCSS(e,t){this.operands[0].genCSS(e,t),this.isSpaced&&t.add(" "),t.add(this.op),this.isSpaced&&t.add(" "),this.operands[1].genCSS(e,t)}}),A={rgb:function(e,t,n){let i=1;if(e instanceof g){const a=e.value;if(e=a[0],t=a[1],(n=a[2])instanceof O){const e=n;n=e.operands[0],i=e.operands[1]}}const a=A.rgba(e,t,n,i);if(a)return a.value="rgb",a},rgba:function(e,t,n,i){try{if(e instanceof s)return i=t?B(t):e.alpha,new s(e.rgb,i,"rgba");const a=[e,t,n].map((e=>{return n=255,(t=e)instanceof u&&t.unit.is("%")?parseFloat(t.value*n/100):B(t);var t,n}));return i=B(i),new s(a,i,"rgba")}catch(e){}},hsl:function(e,t,n){let i=1;if(e instanceof g){const a=e.value;if(e=a[0],t=a[1],(n=a[2])instanceof O){const e=n;n=e.operands[0],i=e.operands[1]}}const a=A.hsla(e,t,n,i);if(a)return a.value="hsl",a},hsla:function(e,t,n,i){try{if(e instanceof s)return i=t?B(t):e.alpha,new s(e.rgb,i,"hsla");let r,o;function a(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?r+(o-r)*e*6:2*e<1?o:3*e<2?r+(o-r)*(2/3-e)*6:r}e=B(e)%360/360,t=_(B(t)),n=_(B(n)),i=_(B(i)),o=n<=.5?n*(t+1):n+t-n*t,r=2*n-o;const l=[255*a(e+1/3),255*a(e),255*a(e-1/3)];return i=B(i),new s(l,i,"hsla")}catch(u){}},hsv:function(e,t,n){return A.hsva(e,t,n,1)},hsva:function(e,t,n,i){let a,r;e=B(e)%360/360*360,t=B(t),n=B(n),i=B(i),a=Math.floor(e/60%6),r=e/60-a;const s=[n,n*(1-t),n*(1-r*t),n*(1-(1-r)*t)],o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return A.rgba(255*s[o[a][0]],255*s[o[a][1]],255*s[o[a][2]],i)},hue:function(e){return new u(V(e).h)},saturation:function(e){return new u(100*V(e).s,"%")},lightness:function(e){return new u(100*V(e).l,"%")},hsvhue:function(e){return new u(R(e).h)},hsvsaturation:function(e){return new u(100*R(e).s,"%")},hsvvalue:function(e){return new u(100*R(e).v,"%")},red:function(e){return new u(e.rgb[0])},green:function(e){return new u(e.rgb[1])},blue:function(e){return new u(e.rgb[2])},alpha:function(e){return new u(V(e).a)},luma:function(e){return new u(e.luma()*e.alpha*100,"%")},luminance:function(e){const t=.2126*e.rgb[0]/255+.7152*e.rgb[1]/255+.0722*e.rgb[2]/255;return new u(t*e.alpha*100,"%")},saturate:function(e,t,n){if(!e.rgb)return null;const i=V(e);return void 0!==n&&"relative"===n.value?i.s+=i.s*t.value/100:i.s+=t.value/100,i.s=_(i.s),$(e,i)},desaturate:function(e,t,n){const i=V(e);return void 0!==n&&"relative"===n.value?i.s-=i.s*t.value/100:i.s-=t.value/100,i.s=_(i.s),$(e,i)},lighten:function(e,t,n){const i=V(e);return void 0!==n&&"relative"===n.value?i.l+=i.l*t.value/100:i.l+=t.value/100,i.l=_(i.l),$(e,i)},darken:function(e,t,n){const i=V(e);return void 0!==n&&"relative"===n.value?i.l-=i.l*t.value/100:i.l-=t.value/100,i.l=_(i.l),$(e,i)},fadein:function(e,t,n){const i=V(e);return void 0!==n&&"relative"===n.value?i.a+=i.a*t.value/100:i.a+=t.value/100,i.a=_(i.a),$(e,i)},fadeout:function(e,t,n){const i=V(e);return void 0!==n&&"relative"===n.value?i.a-=i.a*t.value/100:i.a-=t.value/100,i.a=_(i.a),$(e,i)},fade:function(e,t){const n=V(e);return n.a=t.value/100,n.a=_(n.a),$(e,n)},spin:function(e,t){const n=V(e),i=(n.h+t.value)%360;return n.h=i<0?360+i:i,$(e,n)},mix:function(e,t,n){n||(n=new u(50));const i=n.value/100,a=2*i-1,r=V(e).a-V(t).a,o=((a*r==-1?a:(a+r)/(1+a*r))+1)/2,l=1-o,h=[e.rgb[0]*o+t.rgb[0]*l,e.rgb[1]*o+t.rgb[1]*l,e.rgb[2]*o+t.rgb[2]*l],f=e.alpha*i+t.alpha*(1-i);return new s(h,f)},greyscale:function(e){return A.desaturate(e,new u(100))},contrast:function(e,t,n,i){if(!e.rgb)return null;if(void 0===n&&(n=A.rgba(255,255,255,1)),void 0===t&&(t=A.rgba(0,0,0,1)),t.luma()>n.luma()){const e=n;n=t,t=e}return i=void 0===i?.43:B(i),e.luma()<i?n:t},argb:function(e){return new h(e.toARGB())},color:function(e){if(e instanceof k&&/^#([A-Fa-f0-9]{8}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3,4})$/i.test(e.value)){const t=e.value.slice(1);return new s(t,void 0,`#${t}`)}if(e instanceof s||(e=s.fromKeyword(e.value)))return e.value=void 0,e;throw{type:"Argument",message:"argument must be a color keyword or 3|4|6|8 digit hex e.g. #FFF"}},tint:function(e,t){return A.mix(A.rgb(255,255,255),e,t)},shade:function(e,t){return A.mix(A.rgb(0,0,0),e,t)}};const{fade:L,shade:N,tint:P}=A;export{s as Color,L as fade,N as shade,P as tint};
